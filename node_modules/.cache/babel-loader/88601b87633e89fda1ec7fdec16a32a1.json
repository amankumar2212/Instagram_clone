{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\myfirstreact\\\\src\\\\Post.js\";\nimport React, { useEffect, useState } from 'react';\nimport './Post.css';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { db } from './firebase';\nimport firebase from 'firebase';\nimport ImageUpload from './ImageUpload';\n\nfunction Post({\n  postId,\n  user,\n  username,\n  caption,\n  imageurl\n}) {\n  const [comments, setComments] = useState([]);\n  const [comment, setComment] = useState('');\n  useEffect(() => {\n    let unsubscribe;\n\n    if (postId) {\n      unsubscribe = db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n        setComments(snapshot.docs.map(doc => doc.data()));\n      });\n    }\n\n    return () => {\n      unsubscribe();\n    };\n  }, [postId]);\n\n  const postComment = event => {\n    event.preventDefault();\n    db.collection(\"post\").dec(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setComment('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post_avatar\",\n    alt: \"AmanKumar\",\n    source: \"/static/images/avatar/1.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, username)), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post_image\",\n    alt: \"\",\n    src: imageurl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"post_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 39\n    }\n  }, username), caption), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post_comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, comments.map(comment => /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, comment.username), comment.text))), user && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"post_commentBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"post_input\",\n    type: \"text\",\n    placeholder: \"Add your Comment....\",\n    value: comment,\n    onChange: e => setComments(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"post_button\",\n    disabled: !comment,\n    type: \"submit\",\n    onClick: postComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"Post\")));\n}\n\nexport default Post;","map":{"version":3,"sources":["D:/projects/myfirstreact/src/Post.js"],"names":["React","useEffect","useState","Avatar","db","firebase","ImageUpload","Post","postId","user","username","caption","imageurl","comments","setComments","comment","setComment","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","postComment","event","preventDefault","dec","add","text","displayName","timestamp","firestore","FieldValue","serverTimestamp","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './Post.css';\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { db } from './firebase';\r\nimport firebase from 'firebase';\r\nimport ImageUpload from './ImageUpload';\r\n\r\nfunction Post({ postId, user, username, caption, imageurl }) {\r\n\r\n    const [comments, setComments] = useState([]);\r\n    const [comment, setComment] = useState('');\r\n    useEffect(() => {\r\n        let unsubscribe;\r\n        if (postId) {\r\n            unsubscribe = db\r\n                .collection(\"posts\")\r\n                .doc(postId)\r\n                .collection(\"comments\")\r\n                .orderBy('timestamp', 'desc')\r\n                .onSnapshot((snapshot) => {\r\n                    setComments(snapshot.docs.map((doc) => doc.data()))\r\n                })\r\n        }\r\n\r\n\r\n        return () => {\r\n            unsubscribe();\r\n        };\r\n    }, [postId]);\r\n\r\n    const postComment = (event) => {\r\n        event.preventDefault();\r\n        db.collection(\"post\").dec(postId).collection(\"comments\").add({\r\n            text: comment,\r\n            username: user.displayName,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n        });\r\n\r\n        setComment('');\r\n    }\r\n\r\n    return (\r\n        <div className=\"post\">\r\n\r\n            <div className=\"post_header\">\r\n\r\n                <Avatar\r\n                    className=\"post_avatar\"\r\n                    alt=\"AmanKumar\"\r\n                    source=\"/static/images/avatar/1.png\"\r\n                />\r\n                <h3>{username}</h3>\r\n\r\n            </div>\r\n            {/* header -> avatar + username*/}\r\n\r\n\r\n            <img className=\"post_image\" alt=\"\" src={imageurl} />\r\n            {/* image */}\r\n            <h4 className=\"post_text\"><strong>{username}</strong>{caption}</h4>\r\n            {/* username + caption */}\r\n\r\n            <div className=\"post_comment\">\r\n                {comments.map((comment) => (\r\n                    <p>\r\n                        <strong>{comment.username}</strong>{comment.text}\r\n                    </p>\r\n                ))}\r\n\r\n            </div>\r\n            {user && (\r\n                <form className=\"post_commentBox\">\r\n                    <input\r\n                        className=\"post_input\"\r\n                        type=\"text\"\r\n                        placeholder=\"Add your Comment....\"\r\n                        value={comment}\r\n                        onChange={(e) => setComments(e.target.value)}\r\n                    />\r\n                    <button\r\n                        className=\"post_button\"\r\n                        disabled={!comment}\r\n                        type=\"submit\"\r\n                        onClick={postComment}\r\n                    >\r\n                        Post\r\n                    </button>\r\n\r\n                </form>\r\n            )}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Post"]},"metadata":{},"sourceType":"module"}